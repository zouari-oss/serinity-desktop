<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<StackPane styleClass="mood-root" xmlns="http://javafx.com/javafx/21"
  xmlns:fx="http://javafx.com/fxml/1"
  fx:controller="com.serinity.accesscontrol.controller.MoodHistoryController">

  <!-- Base page content -->
  <BorderPane fx:id="pageRoot">

    <top>
      <VBox spacing="12" styleClass="history-top">
        <padding>
          <Insets bottom="10" left="16" right="16" top="18" />
        </padding>

        <HBox alignment="CENTER_LEFT" spacing="10">
          <Label styleClass="page-title" text="%history.title" />

          <!-- Stats icon -->
          <ImageView fx:id="statsIcon"
            id="stats_icon"
            fitWidth="60"
            fitHeight="60"
            preserveRatio="true"
            pickOnBounds="true"
            styleClass="clickable-icon"
            onMouseClicked="#onStatsClicked"
            onMousePressed="#onStatsPressed"
            onMouseReleased="#onStatsReleased" />

          <Region HBox.hgrow="ALWAYS" />
          <Button fx:id="btnLogNew" onAction="#onLogNew" styleClass="btn-primary"
            text="%history.lognew" />
        </HBox>

        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="history-filters">
          <Label styleClass="filter-label" text="%history.range" />
          <ComboBox fx:id="rangeBox" prefWidth="160" styleClass="filter-box" />

          <Label styleClass="filter-label" text="%history.type" />
          <ComboBox fx:id="typeBox" prefWidth="140" styleClass="filter-box" />

          <TextField fx:id="searchField" prefWidth="220" promptText="%history.search"
            styleClass="filter-search" />

          <Region HBox.hgrow="ALWAYS" />
          <Button fx:id="btnRefresh" onAction="#onRefresh" styleClass="btn-ghost"
            text="%history.refresh" />
        </HBox>
      </VBox>
    </top>

    <center>
      <ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="history-scroll">
        <content>
          <VBox fx:id="timelineBox" spacing="14" styleClass="history-timeline">
            <padding>
              <Insets bottom="18" left="16" right="16" top="10" />
            </padding>
          </VBox>
        </content>
      </ScrollPane>
    </center>

  </BorderPane>

  <!-- Dim overlay-->
  <StackPane fx:id="overlay" managed="false" onMouseClicked="#onStatsOverlayClicked"
    styleClass="overlay-dim" visible="false" />

  <!-- Slide-in stats host -->
  <StackPane fx:id="statsHost" managed="false" maxWidth="430" prefWidth="430"
    styleClass="slide-panel-host" visible="false" />

</StackPane>
