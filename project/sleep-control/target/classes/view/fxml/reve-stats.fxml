<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/21"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.serinity.sleepcontrol.controller.ReveStatsController"
      spacing="16.0"
      stylesheets="@../styles/styles.css"
      style="-fx-background-color: #f5f7fa;"
      minWidth="600" minHeight="500">

    <padding>
        <Insets top="24" right="24" bottom="24" left="24"/>
    </padding>

    <!-- Titre -->
    <HBox alignment="CENTER_LEFT" spacing="12.0">
        <Label text="ðŸ“Š Statistiques des RÃªves" styleClass="page-header"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="ðŸ”„ Actualiser"
                styleClass="btn-secondary"
                onAction="#actualiser"/>
    </HBox>

    <!-- â•â• KPIs â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <HBox spacing="12.0">

        <VBox styleClass="stat-card-violet" spacing="4" alignment="CENTER"
              HBox.hgrow="ALWAYS">
            <Label text="ðŸ’­ Total" styleClass="stat-card-label"/>
            <Label fx:id="kpiTotal" text="â€“" styleClass="stat-card-value"/>
        </VBox>

        <VBox styleClass="stat-card-blue" spacing="4" alignment="CENTER"
              HBox.hgrow="ALWAYS">
            <Label text="âš¡ IntensitÃ© moy." styleClass="stat-card-label"/>
            <Label fx:id="kpiIntensite" text="â€“" styleClass="stat-card-value"/>
        </VBox>

        <VBox styleClass="stat-card-red" spacing="4" alignment="CENTER"
              HBox.hgrow="ALWAYS">
            <Label text="ðŸ˜° AnxiÃ©tÃ© moy." styleClass="stat-card-label"/>
            <Label fx:id="kpiAnxiete" text="â€“" styleClass="stat-card-value"/>
        </VBox>

        <VBox styleClass="stat-card-green" spacing="4" alignment="CENTER"
              HBox.hgrow="ALWAYS">
            <Label text="ðŸ† Bien-Ãªtre" styleClass="stat-card-label"/>
            <Label fx:id="kpiBienEtre" text="â€“" styleClass="stat-card-value"/>
        </VBox>

        <VBox styleClass="stat-card-orange" spacing="4" alignment="CENTER"
              HBox.hgrow="ALWAYS">
            <Label text="ðŸ’ª RÃ©silience" styleClass="stat-card-label"/>
            <Label fx:id="kpiResilience" text="â€“" styleClass="stat-card-value-sm"/>
        </VBox>

    </HBox>

    <!-- â•â• Pourcentages â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <VBox styleClass="filter-container" spacing="10.0">
        <padding><Insets top="12" right="14" bottom="12" left="14"/></padding>

        <Label text="ðŸ“ˆ RÃ©partition" styleClass="section-title"/>

        <HBox spacing="30.0">
            <VBox spacing="6.0" HBox.hgrow="ALWAYS">
                <Label text="ðŸ˜± Cauchemars" styleClass="form-label"/>
                <HBox alignment="CENTER_LEFT" spacing="8.0">
                    <ProgressBar fx:id="barCauchemars" prefWidth="180.0"/>
                    <Label fx:id="pctCauchemars" text="â€“%" styleClass="card-info"/>
                </HBox>
            </VBox>
            <VBox spacing="6.0" HBox.hgrow="ALWAYS">
                <Label text="ðŸ” RÃ©currents" styleClass="form-label"/>
                <HBox alignment="CENTER_LEFT" spacing="8.0">
                    <ProgressBar fx:id="barRecurrents" prefWidth="180.0"/>
                    <Label fx:id="pctRecurrents" text="â€“%" styleClass="card-info"/>
                </HBox>
            </VBox>
            <VBox spacing="6.0" HBox.hgrow="ALWAYS">
                <Label text="ðŸŒˆ En couleur" styleClass="form-label"/>
                <HBox alignment="CENTER_LEFT" spacing="8.0">
                    <ProgressBar fx:id="barCouleur" prefWidth="180.0"/>
                    <Label fx:id="pctCouleur" text="â€“%" styleClass="card-info"/>
                </HBox>
            </VBox>
        </HBox>
    </VBox>

    <!-- â•â• RÃ©partition par type â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <HBox spacing="14.0" VBox.vgrow="ALWAYS">

        <!-- Types -->
        <VBox styleClass="filter-container" spacing="10.0"
              HBox.hgrow="ALWAYS">
            <padding><Insets top="12" right="14" bottom="12" left="14"/></padding>
            <Label text="ðŸŽ­ Types de rÃªves" styleClass="section-title"/>
            <VBox fx:id="typesContainer" spacing="6.0"/>
        </VBox>

        <!-- Top Ã©motions -->
        <VBox styleClass="filter-container" spacing="10.0"
              HBox.hgrow="ALWAYS">
            <padding><Insets top="12" right="14" bottom="12" left="14"/></padding>
            <Label text="ðŸ’« Top Ã©motions" styleClass="section-title"/>
            <VBox fx:id="emotionsContainer" spacing="6.0"/>
        </VBox>

        <!-- Top symboles -->
        <VBox styleClass="filter-container" spacing="10.0"
              HBox.hgrow="ALWAYS">
            <padding><Insets top="12" right="14" bottom="12" left="14"/></padding>
            <Label text="ðŸ”® Top symboles" styleClass="section-title"/>
            <VBox fx:id="symbolesContainer" spacing="6.0"/>
        </VBox>

    </HBox>

    <!-- â•â• Insights â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <VBox styleClass="filter-container" spacing="8.0">
        <padding><Insets top="12" right="14" bottom="10" left="14"/></padding>
        <Label text="ðŸ’¡ Insights" styleClass="section-title"/>
        <VBox fx:id="insightsContainer" spacing="5.0"/>
    </VBox>

</VBox>
